(this["webpackJsonpreact-elevator"]=this["webpackJsonpreact-elevator"]||[]).push([[0],{13:function(e,t,o){},14:function(e,t,o){},17:function(e,t,o){"use strict";o.r(t);var r=o(1),n=o.n(r),a=o(6),s=o.n(a),i=(o(13),o(14),o(5)),l=o(2),u=function(){return Object(l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30px",height:"20px",viewBox:"0 0 50 50",children:Object(l.jsx)("path",{d:"M 15.875 0 C 15.617188 0.0351563 15.378906 0.167969 15.21875 0.375 L 10.21875 6.375 C 9.976563 6.675781 9.929688 7.085938 10.097656 7.433594 C 10.265625 7.78125 10.617188 8 11 8 L 21 8 C 21.382813 8 21.734375 7.78125 21.902344 7.433594 C 22.070313 7.085938 22.023438 6.675781 21.78125 6.375 L 16.78125 0.375 C 16.566406 0.101563 16.222656 -0.0429688 15.875 0 Z M 29.8125 0 C 29.460938 0.0625 29.171875 0.308594 29.046875 0.640625 C 28.925781 0.976563 28.992188 1.351563 29.21875 1.625 L 34.21875 7.625 C 34.410156 7.863281 34.695313 8 35 8 C 35.304688 8 35.589844 7.863281 35.78125 7.625 L 40.78125 1.625 C 41.023438 1.324219 41.070313 0.914063 40.902344 0.566406 C 40.734375 0.21875 40.382813 0 40 0 L 30 0 C 29.96875 0 29.9375 0 29.90625 0 C 29.875 0 29.84375 0 29.8125 0 Z M 32.125 2 L 37.875 2 L 35 5.4375 Z M 16 2.5625 L 18.875 6 L 13.125 6 Z M 3 10 C 1.355469 10 0 11.355469 0 13 L 0 47 C 0 48.644531 1.355469 50 3 50 L 47 50 C 48.644531 50 50 48.644531 50 47 L 50 13 C 50 11.355469 48.644531 10 47 10 Z M 3 12 L 47 12 C 47.554688 12 48 12.445313 48 13 L 48 47 C 48 47.554688 47.554688 48 47 48 L 3 48 C 2.445313 48 2 47.554688 2 47 L 2 13 C 2 12.445313 2.445313 12 3 12 Z M 11 14 C 8.800781 14 7 15.800781 7 18 C 7 20.199219 8.800781 22 11 22 C 13.199219 22 15 20.199219 15 18 C 15 15.800781 13.199219 14 11 14 Z M 11 22 C 7.675781 22 5 24.675781 5 28 L 5 35 C 4.996094 35.386719 5.214844 35.738281 5.5625 35.90625 L 7 36.625 L 7 45 C 7 45.550781 7.449219 46 8 46 L 14 46 C 14.550781 46 15 45.550781 15 45 L 15 36.625 L 16.4375 35.90625 C 16.785156 35.738281 17.003906 35.386719 17 35 L 17 28 C 17 24.675781 14.324219 22 11 22 Z M 25 14 C 22.800781 14 21 15.800781 21 18 C 21 20.199219 22.800781 22 25 22 C 27.199219 22 29 20.199219 29 18 C 29 15.800781 27.199219 14 25 14 Z M 25 22 C 21.675781 22 19 24.675781 19 28 L 19 35 C 18.996094 35.386719 19.214844 35.738281 19.5625 35.90625 L 21 36.625 L 21 45 C 21 45.550781 21.449219 46 22 46 L 28 46 C 28.550781 46 29 45.550781 29 45 L 29 36.625 L 30.4375 35.90625 C 30.785156 35.738281 31.003906 35.386719 31 35 L 31 28 C 31 24.675781 28.324219 22 25 22 Z M 39 14 C 36.800781 14 35 15.800781 35 18 C 35 20.199219 36.800781 22 39 22 C 41.199219 22 43 20.199219 43 18 C 43 15.800781 41.199219 14 39 14 Z M 39 22 C 35.675781 22 33 24.675781 33 28 L 33 35 C 32.996094 35.386719 33.214844 35.738281 33.5625 35.90625 L 35 36.625 L 35 45 C 35 45.550781 35.449219 46 36 46 L 42 46 C 42.550781 46 43 45.550781 43 45 L 43 36.625 L 44.4375 35.90625 C 44.785156 35.738281 45.003906 35.386719 45 35 L 45 28 C 45 24.675781 42.324219 22 39 22 Z M 11 16 C 12.117188 16 13 16.882813 13 18 C 13 19.117188 12.117188 20 11 20 C 9.882813 20 9 19.117188 9 18 C 9 16.882813 9.882813 16 11 16 Z M 25 16 C 26.117188 16 27 16.882813 27 18 C 27 19.117188 26.117188 20 25 20 C 23.882813 20 23 19.117188 23 18 C 23 16.882813 23.882813 16 25 16 Z M 39 16 C 40.117188 16 41 16.882813 41 18 C 41 19.117188 40.117188 20 39 20 C 37.882813 20 37 19.117188 37 18 C 37 16.882813 37.882813 16 39 16 Z M 11 24 C 13.277344 24 15 25.722656 15 28 L 15 34.375 L 13.5625 35.09375 C 13.214844 35.261719 12.996094 35.613281 13 36 L 13 44 L 9 44 L 9 36 C 9.003906 35.613281 8.785156 35.261719 8.4375 35.09375 L 7 34.375 L 7 28 C 7 25.722656 8.722656 24 11 24 Z M 25 24 C 27.277344 24 29 25.722656 29 28 L 29 34.375 L 27.5625 35.09375 C 27.214844 35.261719 26.996094 35.613281 27 36 L 27 44 L 23 44 L 23 36 C 23.003906 35.613281 22.785156 35.261719 22.4375 35.09375 L 21 34.375 L 21 28 C 21 25.722656 22.722656 24 25 24 Z M 39 24 C 41.277344 24 43 25.722656 43 28 L 43 34.375 L 41.5625 35.09375 C 41.214844 35.261719 40.996094 35.613281 41 36 L 41 44 L 37 44 L 37 36 C 37.003906 35.613281 36.785156 35.261719 36.4375 35.09375 L 35 34.375 L 35 28 C 35 25.722656 36.722656 24 39 24 Z"})})},c=Object.freeze({idle:0,moving:1,suspended:2}),v=Object(i.a)((function(e){var t=e.elevator,o=e.board.elevators[t];return Object(l.jsx)("div",{className:"elevator ".concat(o.movementStatus===c.moving?"elevator-moving":o.movementStatus===c.suspended?"elevator-suspended":" "),children:Object(l.jsx)(u,{className:"elevator-icon"})})})),h=o(8),d=Object(i.a)((function(e){var t=e.board,o=e.floor,n=Object(r.useState)(!1),a=Object(h.a)(n,2),s=(a[0],a[1],function(){var e;return(null===o||void 0===o||null===(e=o.assignedElevator)||void 0===e?void 0:e.movementStatus)===c.moving}),i=function(){var e;return(null===o||void 0===o||null===(e=o.assignedElevator)||void 0===e?void 0:e.movementStatus)===c.suspended};return Object(l.jsx)("button",{className:"call-button ".concat(s()?"floor-waiting":i()?"floor-arrived":""),onClick:function(){t.sendElevator(o.id)},children:s()?"Waiting":i()?"Arrived":"Call"})})),C=function(e){var t="",o="",r=!1;switch(e>20&&e<100&&(o=Math.floor(e/10),e%=10,r=!0),e){case 0:t="Ground Floor";break;case 1:t="".concat(e,"st");break;case 2:t="".concat(e,"nd");break;case 3:t="".concat(e,"rd");break;default:t="".concat(e,"th")}return r&&(t=o+t),t},f=Object(i.a)((function(e){var t=e.board.board;return Object(l.jsx)("div",{className:"App",children:t.map((function(t,o){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"floor-name u-bold",children:[C(o)," "]}),Object(l.jsx)("div",{className:"board-wrapper",children:t.map((function(t,o){return"number"===typeof t?Object(l.jsx)(v,{board:e.board,elevator:t},o):Object(l.jsx)("div",{className:"elevator"},o)}))}),Object(l.jsx)(d,{board:e.board,floor:e.board.floors[o]})]},o)})).reverse()})})),b=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,18)).then((function(t){var o=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;o(e),r(e),n(e),a(e),s(e)}))},m=o(3),L=o(4),g=2e3,j=500,p=o(0),F=function(){function e(t){Object(m.a)(this,e),this.id=t,this.directionIsUp=!0,this.movementStatus=c.idle,this.previousFloor=0,this.currentFloor=0,this.targetFloor=0,this.intervalId=null,this.board=null,this.floorInstance=null,Object(p.e)(this,{movementStatus:p.f,currentFloor:p.f,goTo:p.b,suspend:p.b,move:p.b,moveOneFloor:p.b,changeMovementStatus:p.b})}return Object(L.a)(e,[{key:"changeMovementStatus",value:function(e){this.movementStatus=e}},{key:"goTo",value:function(e,t){this.targetFloor=e.id,this.directionIsUp=this.targetFloor>this.currentFloor||this.targetFloor===this.currentFloor,this.changeMovementStatus(c.moving),this.board=t,this.floorInstance=e,this.floorInstance.setElevator(this),this.move()}},{key:"suspend",value:function(){var e=this;this.changeMovementStatus(c.suspended),setTimeout((function(){e.changeMovementStatus(c.idle),e.floorInstance.clearElevator(),e.board.queue.length&&e.board.orderElevator()}),g)}},{key:"moveOneFloor",value:function(e){this.targetFloor!==this.currentFloor&&(this.previousFloor=this.currentFloor,e?this.currentFloor++:this.currentFloor--,this.board.placeElevators())}},{key:"move",value:function(){var e=this;console.log("Elevator ".concat(this.id," start moving... status ").concat(this.movementStatus)),this.intervalId=setInterval((function(){e.moveOneFloor(e.directionIsUp),e.targetFloor===e.currentFloor&&(clearInterval(e.intervalId),e.suspend())}),j)}},{key:"playSound",value:function(){new Audio("./assets/elevator-bell-ding").play()}}]),e}(),O=function(){function e(t){Object(m.a)(this,e),this.id=t,this.assignedElevator=null,Object(p.e)(this,{assignedElevator:p.f,setElevator:p.b,clearElevator:p.b})}return Object(L.a)(e,[{key:"setElevator",value:function(e){this.assignedElevator=e}},{key:"clearElevator",value:function(){this.assignedElevator=null}}]),e}(),E=new(function(){function e(t,o){Object(m.a)(this,e),this.floorsNum=t,this.elevatorsNum=o,this.queue=[],this.board=this._generateBoard(),this.elevators=this._generateElevators(),this.floors=this._generateFloors(),this.placeElevators(),Object(p.e)(this,{board:p.f,elevators:p.f,placeElevators:p.b,orderElevator:p.b})}return Object(L.a)(e,[{key:"_generateBoard",value:function(){if(this.elevatorsNum&&this.floorsNum){for(var e=[],t=0;t<this.floorsNum;t++){e.push([]);for(var o=0;o<this.elevatorsNum;o++)e[t].push("-")}return e}console.log("_generateBoard Should receive floorsNum, elevatorsNum but got ".concat(this.floorsNum,", ").concat(this.elevatorsNum))}},{key:"_generateElevators",value:function(){for(var e=[],t=0;t<this.elevatorsNum;t++)e.push(new F(t));return e}},{key:"_generateFloors",value:function(){for(var e=[],t=0;t<this.floorsNum;t++)e.push(new O(t));return e}},{key:"placeElevators",value:function(){var e=this;this.elevators.forEach((function(t){e.board[t.previousFloor][t.id]="-",e.board[t.currentFloor][t.id]=t.id}))}},{key:"addToQueue",value:function(e){this.queue.push(e)}},{key:"nextFromQueue",value:function(){return this.queue.shift()}},{key:"availableElevators",value:function(){return this.elevators.filter((function(e){return e.movementStatus===c.idle}))}},{key:"getClosestElevator",value:function(e,t){return e.reduce((function(e,o){return Math.abs(o.currentFloor-t)<Math.abs(e.currentFloor-t)?o:e}))}},{key:"orderElevator",value:function(){var e=this.availableElevators();if(e.length){var t=this.nextFromQueue(),o=this.getClosestElevator(e,t);o.goTo(this.floors[t],this),console.log("Log: ordered elevator number ".concat(o.id))}}},{key:"sendElevator",value:function(e){this.addToQueue(e),this.orderElevator()}}]),e}())(14,5);s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(f,{board:E})}),document.getElementById("root")),b()}},[[17,1,2]]]);
//# sourceMappingURL=main.2b4a398f.chunk.js.map